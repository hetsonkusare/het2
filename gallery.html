<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Gallery — Het Sonkusare</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg:      #1a1a1a;
  --panel:   #232323;
  --panel2:  #2a2a2a;
  --border:  #3a3a3a;
  --border2: #444;
  --red:     #e4293a;
  --red-glow: rgba(228,41,58,0.15);
  --white:   #e8e8e8;
  --dim:     #888;
  --dim2:    #555;
  --mono:    'Share Tech Mono', monospace;
}
html { scroll-behavior: smooth; }
body { background: var(--bg); color: var(--white); font-family: 'DM Sans', sans-serif; font-weight: 300; overflow-x: hidden; cursor: none; }

/* ── CURSOR — crosshair ── */
.cursor {
  position: fixed; width: 12px; height: 12px;
  pointer-events: none; z-index: 9999;
  transform: translate(-50%,-50%);
}
.cursor::before, .cursor::after {
  content: ''; position: absolute; background: var(--red);
}
.cursor::before { width: 1px; height: 12px; left: 5px; top: 0; }
.cursor::after  { width: 12px; height: 1px; top: 5px; left: 0; }
.cursor-ring {
  position: fixed; width: 36px; height: 36px;
  border: 1px solid rgba(228,41,58,0.5); border-radius: 50%;
  pointer-events: none; z-index: 9998;
  transform: translate(-50%,-50%); transition: all 0.12s ease;
}
body:has(a:hover) .cursor-ring,
body:has(button:hover) .cursor-ring {
  transform: translate(-50%,-50%) scale(1.8);
  border-color: var(--red); background: rgba(228,41,58,0.08);
}

/* ── NAV ── */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  height: 48px; display: flex; align-items: center;
  justify-content: space-between; padding: 0 24px;
  background: #111; border-bottom: 1px solid #000;
  box-shadow: 0 2px 12px rgba(0,0,0,0.6);
}
.nav-logo {
  font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem;
  letter-spacing: 0.15em; color: var(--white); text-decoration: none;
  display: flex; align-items: center; gap: 10px;
}
.nav-logo-dot { width: 8px; height: 8px; background: var(--red); border-radius: 50%; box-shadow: 0 0 8px var(--red); }
.nav-back {
  display: flex; align-items: center; gap: 8px;
  color: var(--dim); text-decoration: none;
  font-family: var(--mono); font-size: 0.65rem;
  letter-spacing: 0.12em; text-transform: uppercase;
  transition: color 0.3s;
}
.nav-back:hover { color: var(--red); }

/* ── PAGE HEADER ── */
.page-header {
  padding: 80px 48px 36px;
  margin-top: 48px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(to bottom, #141414, var(--bg));
  position: relative; overflow: hidden;
}
/* Grid bg */
.page-header::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(228,41,58,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(228,41,58,0.04) 1px, transparent 1px);
  background-size: 32px 32px;
  pointer-events: none;
}
.page-tag {
  font-family: var(--mono);
  font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--red); margin-bottom: 12px; position: relative;
}
.page-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(48px, 7vw, 100px); line-height: 0.95;
  position: relative;
}
.page-title em { font-style: normal; color: var(--red); }
.page-count {
  margin-top: 14px; color: var(--dim2);
  font-family: var(--mono); font-size: 0.65rem;
  letter-spacing: 0.1em; text-transform: uppercase;
  position: relative;
}

/* ── FILTER BAR ── */
.filter-bar {
  padding: 16px 48px;
  display: flex; gap: 4px; flex-wrap: wrap;
  background: #141414; border-bottom: 1px solid var(--border);
}
.filter-btn {
  background: transparent; border: 1px solid var(--border);
  color: var(--dim2); font-family: var(--mono);
  font-size: 0.62rem; letter-spacing: 0.12em; text-transform: uppercase;
  padding: 7px 18px; cursor: none; transition: all 0.2s; border-radius: 2px;
}
.filter-btn:hover { border-color: var(--border2); color: var(--white); background: rgba(255,255,255,0.04); }
.filter-btn.active { background: var(--red); border-color: var(--red); color: var(--white); }

/* ── GALLERY GRID ── */
.gallery-grid { padding: 24px 48px 80px; columns: 3; column-gap: 6px; }
.gallery-item {
  break-inside: avoid; margin-bottom: 6px;
  position: relative; overflow: hidden;
  background: var(--panel); cursor: none;
  animation: fadeUp 0.45s ease both;
  border: 1px solid var(--border);
  transition: border-color 0.3s;
}
.gallery-item:hover { border-color: var(--border2); }
.gallery-item img, .gallery-item video { width: 100%; display: block; transition: transform 0.5s ease; }
.gallery-item:hover img, .gallery-item:hover video { transform: scale(1.04); }

/* Corner clip on each item */
.gallery-item::after {
  content: ''; position: absolute; top: 0; right: 0;
  width: 0; height: 0; border-style: solid;
  border-width: 0 14px 14px 0;
  border-color: transparent var(--border) transparent transparent;
  z-index: 2; transition: border-color 0.3s;
}
.gallery-item:hover::after { border-color: transparent var(--red) transparent transparent; }

.gallery-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.92) 0%, transparent 55%);
  opacity: 0; transition: opacity 0.3s;
  display: flex; flex-direction: column; justify-content: flex-end; padding: 18px;
}
.gallery-item:hover .gallery-overlay { opacity: 1; }
.overlay-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 0.05em; }
.overlay-type {
  font-family: var(--mono);
  font-size: 0.58rem; letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--red); margin-top: 4px;
}
.overlay-play {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%,-50%) scale(0.7);
  width: 48px; height: 48px; background: var(--red);
  border-radius: 2px; display: flex; align-items: center; justify-content: center;
  opacity: 0; transition: all 0.3s;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 0 100%);
}
.gallery-item:hover .overlay-play { opacity: 1; transform: translate(-50%,-50%) scale(1); }

.video-badge {
  position: absolute; top: 8px; left: 8px;
  background: rgba(228,41,58,0.9); color: var(--white);
  font-family: var(--mono); font-size: 0.55rem; font-weight: 400;
  letter-spacing: 0.1em; text-transform: uppercase; padding: 3px 8px;
  display: flex; align-items: center; gap: 5px; border-radius: 1px;
}

/* ── EMPTY / SETUP ── */
.empty-state { padding: 80px 48px; text-align: center; display: none; }
.empty-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; color: var(--dim); margin-bottom: 12px; margin-top: 16px; }
.empty-desc { color: var(--dim2); font-family: var(--mono); font-size: 0.7rem; line-height: 1.9; max-width: 480px; margin: 0 auto; }
.empty-desc code { background: var(--panel); padding: 2px 7px; color: var(--red); border-radius: 2px; border: 1px solid var(--border); }
.setup-guide { margin: 0 48px 80px; border: 1px solid var(--border); padding: 40px; background: var(--panel); display: none; }
.setup-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; color: var(--red); margin-bottom: 20px; }
.step { display: flex; gap: 16px; align-items: flex-start; margin-bottom: 14px; }
.step-num { flex-shrink: 0; width: 24px; height: 24px; background: var(--red); color: var(--white); font-family: var(--mono); font-size: 0.65rem; display: flex; align-items: center; justify-content: center; }
.step-text { font-size: 0.85rem; line-height: 1.7; color: var(--dim); }
.step-text code { color: var(--red); background: rgba(228,41,58,0.1); padding: 1px 5px; font-family: var(--mono); border-radius: 2px; }
.step-text strong { color: var(--white); }

/* ═══════════════════════════════════════════════════════════
   PLAYER OVERLAY — DaVinci Resolve Color Page aesthetic
   ═══════════════════════════════════════════════════════════ */
.player-overlay {
  position: fixed; inset: 0; z-index: 1000;
  background: #111; display: none; flex-direction: column; overflow: hidden;
}
.player-overlay.open { display: flex; }

/* Top bar — DR toolbar style */
.player-topbar {
  display: flex; align-items: center; gap: 12px;
  padding: 0 16px; height: 44px; flex-shrink: 0;
  background: #0d0d0d; border-bottom: 1px solid #000;
  box-shadow: 0 1px 8px rgba(0,0,0,0.5);
}
.player-top-title {
  font-family: 'Bebas Neue', sans-serif; font-size: 1rem;
  letter-spacing: 0.08em; flex: 1; white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis;
}
.player-top-count {
  font-family: var(--mono); font-size: 0.62rem;
  color: var(--dim); letter-spacing: 0.1em; white-space: nowrap;
}

/* Icon buttons */
.icon-btn {
  background: none; border: none; color: rgba(255,255,255,0.6);
  cursor: none; padding: 6px; display: flex; align-items: center; justify-content: center;
  border-radius: 2px; transition: color 0.2s, background 0.2s; flex-shrink: 0;
}
.icon-btn:hover { color: var(--red); background: rgba(228,41,58,0.1); }
.icon-btn.active { color: var(--red); }
.icon-btn svg { display: block; pointer-events: none; }

/* Body */
.player-body { display: flex; flex: 1; overflow: hidden; min-height: 0; }

/* ── STAGE ── */
.player-stage {
  flex: 1; position: relative;
  display: flex; align-items: center; justify-content: center;
  overflow: hidden; background: #0a0a0a; min-width: 0;
}

/* Blurred bg */
.stage-blur-bg {
  position: absolute; inset: -50px;
  background-size: cover; background-position: center;
  filter: blur(52px) brightness(0.18) saturate(1.2);
  z-index: 0; pointer-events: none;
}

/* Corner decoration on stage */
.player-stage::before, .player-stage::after {
  content: ''; position: absolute; z-index: 5; pointer-events: none;
  width: 20px; height: 20px;
}
.player-stage::before {
  top: 12px; left: 12px;
  border-top: 1px solid var(--red); border-left: 1px solid var(--red);
}
.player-stage::after {
  bottom: 12px; right: 12px;
  border-bottom: 1px solid var(--red); border-right: 1px solid var(--red);
}

#mediaWrap {
  position: relative; z-index: 2;
  display: flex; align-items: center; justify-content: center;
  width: 100%; height: 100%;
}
#mediaWrap video.vid-horizontal {
  width: 100%; height: 100%; max-width: 100%; max-height: 100%;
  object-fit: contain; display: block;
}
#mediaWrap video.vid-vertical {
  height: 100%; width: auto; max-height: 100%;
  max-width: min(380px, 42vw);
  object-fit: cover; display: block;
  border-radius: 2px;
  box-shadow: 0 8px 60px rgba(0,0,0,0.9), 0 0 0 1px rgba(228,41,58,0.2);
}
#mediaWrap img {
  max-width: 100%; max-height: 100%;
  object-fit: contain; display: block;
  user-select: none; transform-origin: center; transition: transform 0.2s;
}

/* Stage prev/next */
.stage-nav {
  position: absolute; top: 0; bottom: 0; width: 64px;
  display: flex; align-items: center; justify-content: center;
  background: transparent; border: none;
  color: rgba(255,255,255,0); cursor: none;
  transition: color 0.2s, background 0.2s; z-index: 10;
}
.stage-nav:hover { color: var(--white); background: rgba(0,0,0,0.35); }
.stage-nav-prev { left: 0; }
.stage-nav-next { right: 0; }

/* Play flash */
.play-flash {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%,-50%) scale(0);
  width: 68px; height: 68px; background: var(--red);
  border-radius: 2px; display: flex; align-items: center; justify-content: center;
  pointer-events: none; z-index: 20;
  opacity: 0; transition: transform 0.07s ease, opacity 0.4s ease;
  clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 0 100%);
}
.play-flash.pop { transform: translate(-50%,-50%) scale(1); opacity: 1; }
.play-flash.fade { transform: translate(-50%,-50%) scale(1.1); opacity: 0; }

/* Image zoom */
.img-controls { position: absolute; bottom: 12px; right: 12px; display: none; gap: 4px; z-index: 10; }
.img-ctrl-btn {
  background: rgba(10,10,10,0.9); border: 1px solid var(--border);
  color: var(--white); width: 32px; height: 32px;
  display: flex; align-items: center; justify-content: center;
  cursor: none; border-radius: 2px; transition: all 0.2s;
}
.img-ctrl-btn:hover { border-color: var(--red); color: var(--red); }

/* Keyboard hint */
.kb-hint {
  position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.88); color: rgba(255,255,255,0.4);
  font-family: var(--mono); font-size: 0.6rem; padding: 5px 14px; border-radius: 2px;
  pointer-events: none; opacity: 0; transition: opacity 0.4s;
  white-space: nowrap; z-index: 15; letter-spacing: 0.06em;
  border: 1px solid var(--border);
}
.kb-hint.show { opacity: 1; }

/* ── VIDEO CONTROLS — DR transport bar style ── */
.player-controls {
  flex-shrink: 0;
  background: #0d0d0d;
  border-top: 1px solid #000;
  padding: 4px 18px 12px;
  display: none;
}
.player-controls.visible { display: block; }

/* Seekbar — DR timeline style */
.seekbar-wrap { height: 20px; display: flex; align-items: center; cursor: none; position: relative; }
.seekbar-track {
  width: 100%; height: 3px;
  background: #2a2a2a; border-radius: 1px;
  position: relative; transition: height 0.15s; overflow: visible;
}
.seekbar-wrap:hover .seekbar-track { height: 5px; }
.seekbar-buffer { position: absolute; top: 0; left: 0; height: 100%; background: #444; border-radius: 1px; }
.seekbar-fill {
  position: absolute; top: 0; left: 0; height: 100%;
  background: var(--red); border-radius: 1px; pointer-events: none;
  box-shadow: 0 0 6px rgba(228,41,58,0.5);
}
.seekbar-thumb {
  position: absolute; top: 50%; right: -6px;
  width: 12px; height: 12px; background: var(--white);
  border-radius: 50%; border: 2px solid var(--red);
  transform: translateY(-50%) scale(0); transition: transform 0.15s;
  pointer-events: none; z-index: 2;
}
.seekbar-wrap:hover .seekbar-thumb { transform: translateY(-50%) scale(1); }
.seekbar-tooltip {
  position: absolute; bottom: 24px;
  background: #0d0d0d; color: var(--white); border: 1px solid var(--border);
  font-family: var(--mono); font-size: 0.62rem; padding: 3px 8px; border-radius: 2px;
  pointer-events: none; opacity: 0; transform: translateX(-50%);
  white-space: nowrap; transition: opacity 0.1s;
}
.seekbar-wrap:hover .seekbar-tooltip { opacity: 1; }

/* Controls row */
.controls-row { display: flex; align-items: center; gap: 2px; padding-top: 4px; }
.ctrl-spacer { flex: 1; }

/* Time display — DR timecode style */
.time-display {
  font-family: var(--mono); font-size: 0.72rem;
  color: var(--dim); letter-spacing: 0.08em;
  white-space: nowrap; font-variant-numeric: tabular-nums;
  padding: 0 10px;
  background: #141414; border: 1px solid var(--border);
  border-radius: 2px; padding: 4px 10px;
}
.time-display span#timeNow { color: var(--white); }

/* Speed label */
.speed-label {
  font-family: var(--mono); font-size: 0.65rem;
  font-weight: 400; letter-spacing: 0.06em;
  min-width: 36px; text-align: center;
  background: #141414; border: 1px solid var(--border);
  padding: 4px 8px; border-radius: 2px;
}

/* Volume */
.vol-group { display: flex; align-items: center; gap: 4px; }
.vol-slider-wrap { width: 0; overflow: hidden; transition: width 0.28s ease; display: flex; align-items: center; }
.vol-group:hover .vol-slider-wrap { width: 76px; }
.vol-slider {
  -webkit-appearance: none; appearance: none;
  width: 76px; height: 2px; background: #333; border-radius: 1px; outline: none; cursor: none;
}
.vol-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 10px; height: 10px;
  background: var(--white); border: 2px solid var(--red); border-radius: 50%; cursor: none;
}
.vol-slider::-moz-range-thumb { width: 10px; height: 10px; background: var(--white); border: 2px solid var(--red); border-radius: 50%; cursor: none; }

/* ── SIDEBAR — DR inspector panel ── */
.player-sidebar {
  width: 280px; flex-shrink: 0;
  background: #141414;
  border-left: 1px solid #000;
  display: flex; flex-direction: column; overflow: hidden;
}
.sidebar-header {
  padding: 0 16px; height: 36px;
  border-bottom: 1px solid #000;
  font-family: var(--mono); font-size: 0.6rem;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--dim2); flex-shrink: 0;
  display: flex; justify-content: space-between; align-items: center;
  background: #111;
}
.sidebar-count {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1rem; color: var(--red);
}
.sidebar-search { padding: 8px 12px; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.sidebar-search input {
  width: 100%; background: #1a1a1a; border: 1px solid var(--border);
  color: var(--white); font-family: var(--mono);
  font-size: 0.68rem; padding: 6px 10px; outline: none;
  border-radius: 2px; transition: border-color 0.2s; letter-spacing: 0.06em;
}
.sidebar-search input::placeholder { color: var(--dim2); }
.sidebar-search input:focus { border-color: var(--red); }
.sidebar-list { flex: 1; overflow-y: auto; }
.sidebar-list::-webkit-scrollbar { width: 3px; }
.sidebar-list::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 1px; }

.playlist-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 12px; cursor: none;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  transition: background 0.2s; position: relative;
}
.playlist-item:hover { background: rgba(255,255,255,0.04); }
.playlist-item.active { background: rgba(228,41,58,0.08); border-left: 2px solid var(--red); }
.playlist-item.active .pi-title { color: var(--red); }

.pi-thumb {
  width: 52px; height: 34px; flex-shrink: 0;
  background: var(--panel); overflow: hidden; position: relative; border-radius: 1px;
  border: 1px solid var(--border);
}
.pi-thumb img, .pi-thumb video { width: 100%; height: 100%; object-fit: cover; }
.pi-play-icon {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0,0,0,0.5);
}

.pi-info { flex: 1; min-width: 0; }
.pi-title { font-size: 0.75rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pi-meta {
  font-family: var(--mono); font-size: 0.58rem;
  letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--dim2); margin-top: 3px;
}
.pi-num {
  font-family: var(--mono); font-size: 0.7rem;
  color: var(--dim2); flex-shrink: 0; min-width: 18px; text-align: right;
}

/* Animated bars */
.pi-bars { display: none; align-items: flex-end; gap: 2px; height: 12px; margin-left: 4px; }
.playlist-item.active .pi-bars { display: flex; }
.playlist-item.active .pi-num { display: none; }
.pi-bars span { display: block; width: 2px; background: var(--red); border-radius: 1px; animation: barBounce 0.7s ease infinite alternate; }
.pi-bars span:nth-child(1) { height: 6px; }
.pi-bars span:nth-child(2) { height: 11px; animation-delay: 0.18s; }
.pi-bars span:nth-child(3) { height: 5px; animation-delay: 0.34s; }

/* ── FOOTER ── */
footer {
  padding: 20px 48px;
  background: #111; border-top: 1px solid #000;
  display: flex; justify-content: space-between; align-items: center;
}
.footer-copy { font-family: var(--mono); font-size: 0.6rem; color: var(--dim2); letter-spacing: 0.1em; }
.footer-back { display: flex; align-items: center; gap: 6px; font-family: var(--mono); font-size: 0.6rem; color: var(--dim2); text-decoration: none; transition: color 0.3s; letter-spacing: 0.1em; }
.footer-back:hover { color: var(--red); }

/* ── ANIMATIONS ── */
@keyframes fadeUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }
@keyframes barBounce { from { transform:scaleY(0.35); } to { transform:scaleY(1); } }

/* ── RESPONSIVE ── */
@media (max-width:900px) {
  /* Restore cursor on touch devices */
  body { cursor: auto; }
  .cursor, .cursor-ring { display: none; }
  .icon-btn, .filter-btn, .img-ctrl-btn, .stage-nav { cursor: pointer; }
  .seekbar-wrap, .vol-slider, .vol-slider::-webkit-slider-thumb,
  .vol-slider::-moz-range-thumb { cursor: pointer; }
  .playlist-item { cursor: pointer; }

  .gallery-grid { columns: 2; padding: 16px 16px 48px; }
  .page-header, .filter-bar { padding-left: 16px; padding-right: 16px; }
  .player-sidebar { width: 200px; }
  nav { padding: 0 16px; }
  #mediaWrap video.vid-vertical { max-width: min(260px, 46vw); }
}
@media (max-width:650px) {
  .gallery-grid { columns: 1; }
  .player-sidebar { display: none; }
  footer { flex-direction: column; gap: 8px; padding: 16px 16px; }
  #mediaWrap video.vid-vertical { max-width: 84vw; }
  /* Make controls more touch friendly on small screens */
  .icon-btn { padding: 10px; }
  .controls-row { gap: 4px; flex-wrap: wrap; }
  .time-display { font-size: 0.65rem; }
  .vol-group:hover .vol-slider-wrap { width: 60px; }
  .vol-slider { width: 60px; }
  /* Larger tap targets for prev/next on stage */
  .stage-nav { width: 48px; color: rgba(255,255,255,0.15); }
}
</style>
</head>
<body>

<!-- SVG ICON SPRITE -->
<svg xmlns="http://www.w3.org/2000/svg" style="display:none">
  <symbol id="i-close"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></symbol>
  <symbol id="i-play"   viewBox="0 0 24 24"><polygon points="5,3 21,12 5,21" fill="currentColor"/></symbol>
  <symbol id="i-pause"  viewBox="0 0 24 24"><rect x="5" y="3" width="4" height="18" rx="1" fill="currentColor"/><rect x="15" y="3" width="4" height="18" rx="1" fill="currentColor"/></symbol>
  <symbol id="i-prev"   viewBox="0 0 24 24"><polygon points="19,3 7,12 19,21" fill="currentColor"/><rect x="5" y="3" width="3" height="18" rx="1" fill="currentColor"/></symbol>
  <symbol id="i-next"   viewBox="0 0 24 24"><polygon points="5,3 17,12 5,21" fill="currentColor"/><rect x="16" y="3" width="3" height="18" rx="1" fill="currentColor"/></symbol>
  <symbol id="i-vol"    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19" fill="currentColor" stroke="none"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></symbol>
  <symbol id="i-vol-low" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19" fill="currentColor" stroke="none"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></symbol>
  <symbol id="i-mute"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19" fill="currentColor" stroke="none"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></symbol>
  <symbol id="i-loop"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17,1 21,5 17,9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7,23 3,19 7,15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></symbol>
  <symbol id="i-auto"  viewBox="0 0 24 24"><polygon points="5,3 17,12 5,21" fill="currentColor"/><rect x="17" y="3" width="3" height="18" rx="1" fill="currentColor"/></symbol>
  <symbol id="i-fs"    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15,3 21,3 21,9"/><polyline points="9,21 3,21 3,15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></symbol>
  <symbol id="i-fs-exit" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="4,14 10,14 10,20"/><polyline points="20,10 14,10 14,4"/><line x1="10" y1="14" x2="3" y2="21"/><line x1="21" y1="3" x2="14" y2="10"/></symbol>
  <symbol id="i-left"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="15,18 9,12 15,6"/></symbol>
  <symbol id="i-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="9,18 15,12 9,6"/></symbol>
  <symbol id="i-zoomin"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></symbol>
  <symbol id="i-zoomout" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></symbol>
  <symbol id="i-reset"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 .49-4.95"/></symbol>
  <symbol id="i-back"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12,19 5,12 12,5"/></symbol>
  <symbol id="i-vid"   viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23,7 16,12 23,17" fill="currentColor" stroke="none"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></symbol>
</svg>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-logo">
    <span class="nav-logo-dot"></span>
    HS.
  </a>
  <a href="index.html" class="nav-back">
    <svg width="13" height="13"><use href="#i-back"/></svg>
    Back to Portfolio
  </a>
</nav>

<!-- HEADER -->
<div class="page-header">
  <div class="page-tag">// Selected Work</div>
  <h1 class="page-title">My <em>Gallery</em></h1>
  <p class="page-count" id="pageCount">Loading…</p>
</div>

<!-- FILTER -->
<div class="filter-bar">
  <button class="filter-btn active" onclick="filterGallery('all',this)">All</button>
  <button class="filter-btn" onclick="filterGallery('image',this)">Photos</button>
  <button class="filter-btn" onclick="filterGallery('video',this)">Videos</button>
</div>

<!-- GRID -->
<div class="gallery-grid" id="galleryGrid"></div>
<div class="empty-state" id="emptyState">
  <svg width="48" height="48" style="opacity:.2;color:var(--dim)"><use href="#i-vid"/></svg>
  <div class="empty-title">No media found</div>
  <div class="empty-desc">Add files to <code>media/</code> and update the list in gallery.html</div>
</div>
<div class="setup-guide" id="setupGuide">
  <div class="setup-title">How To Add Your Media</div>
  <div class="step"><div class="step-num">1</div><div class="step-text">Create a <code>media/</code> folder next to <code>gallery.html</code>.</div></div>
  <div class="step"><div class="step-num">2</div><div class="step-text">Put your <strong>images</strong> and <strong>videos</strong> inside it.</div></div>
  <div class="step"><div class="step-num">3</div><div class="step-text">Find <strong>MEDIA FILES LIST</strong> in the script below and add your filenames.</div></div>
</div>

<!-- ══ PLAYER ══ -->
<div class="player-overlay" id="playerOverlay">

  <div class="player-topbar">
    <button class="icon-btn" onclick="closePlayer()" title="Close  Esc">
      <svg width="18" height="18"><use href="#i-close"/></svg>
    </button>
    <div class="player-top-title" id="playerTitle">—</div>
    <div class="player-top-count" id="playerCount"></div>
  </div>

  <div class="player-body">

    <div class="player-stage" id="playerStage">
      <div class="stage-blur-bg" id="stageBg"></div>
      <button class="stage-nav stage-nav-prev" onclick="navigate(-1)" title="Previous  ←">
        <svg width="26" height="26"><use href="#i-left"/></svg>
      </button>
      <button class="stage-nav stage-nav-next" onclick="navigate(1)" title="Next  →">
        <svg width="26" height="26"><use href="#i-right"/></svg>
      </button>
      <div id="mediaWrap"></div>
      <div class="play-flash" id="playFlash">
        <svg width="26" height="26" id="flashIcon"><use href="#i-play"/></svg>
      </div>
      <div class="img-controls" id="imgControls">
        <button class="img-ctrl-btn" onclick="zoomImg(-0.25)" title="Zoom Out">
          <svg width="14" height="14"><use href="#i-zoomout"/></svg>
        </button>
        <button class="img-ctrl-btn" onclick="zoomImg(0.25)" title="Zoom In">
          <svg width="14" height="14"><use href="#i-zoomin"/></svg>
        </button>
        <button class="img-ctrl-btn" onclick="resetZoom()" title="Reset">
          <svg width="14" height="14"><use href="#i-reset"/></svg>
        </button>
      </div>
      <div class="kb-hint" id="kbHint">SPACE Play/Pause &nbsp;·&nbsp; ← → Seek &nbsp;·&nbsp; SHIFT+← → Clip &nbsp;·&nbsp; M Mute &nbsp;·&nbsp; F Fullscreen</div>
    </div>

    <!-- Sidebar -->
    <div class="player-sidebar">
      <div class="sidebar-header">
        <span>Playlist</span>
        <span class="sidebar-count" id="sidebarCount"></span>
      </div>
      <div class="sidebar-search">
        <input type="text" placeholder="Search clips…" id="sidebarSearch" oninput="filterSidebar(this.value)"/>
      </div>
      <div class="sidebar-list" id="sidebarList"></div>
    </div>
  </div>

  <!-- Controls -->
  <div class="player-controls" id="videoControls">
    <div class="seekbar-wrap" id="seekbarWrap">
      <div class="seekbar-track" id="seekbarTrack">
        <div class="seekbar-buffer" id="seekBuffer" style="width:0%"></div>
        <div class="seekbar-fill" id="seekFill" style="width:0%">
          <div class="seekbar-thumb"></div>
        </div>
      </div>
      <div class="seekbar-tooltip" id="seekTooltip">0:00</div>
    </div>
    <div class="controls-row">
      <button class="icon-btn" id="playBtn" onclick="togglePlay()" title="Play/Pause  Space">
        <svg width="20" height="20" id="playIcon"><use href="#i-play"/></svg>
      </button>
      <button class="icon-btn" onclick="navigate(-1)" title="Previous">
        <svg width="18" height="18"><use href="#i-prev"/></svg>
      </button>
      <button class="icon-btn" onclick="navigate(1)" title="Next">
        <svg width="18" height="18"><use href="#i-next"/></svg>
      </button>
      <div class="vol-group">
        <button class="icon-btn" id="muteBtn" onclick="toggleMute()" title="Mute  M">
          <svg width="18" height="18" id="volIcon"><use href="#i-vol"/></svg>
        </button>
        <div class="vol-slider-wrap">
          <input type="range" class="vol-slider" id="volSlider" min="0" max="1" step="0.02" value="1" oninput="setVolume(this.value)">
        </div>
      </div>
      <div class="time-display"><span id="timeNow">0:00</span> / <span id="timeTot">0:00</span></div>
      <div class="ctrl-spacer"></div>
      <button class="icon-btn speed-label" id="speedBtn" onclick="cycleSpeed()" title="Speed  >">1x</button>
      <button class="icon-btn" id="loopBtn" onclick="toggleLoop()" title="Loop">
        <svg width="18" height="18"><use href="#i-loop"/></svg>
      </button>
      <button class="icon-btn active" id="autoBtn" onclick="toggleAuto()" title="Autoplay">
        <svg width="18" height="18"><use href="#i-auto"/></svg>
      </button>
      <button class="icon-btn" id="fsBtn" onclick="toggleFullscreen()" title="Fullscreen  F">
        <svg width="18" height="18" id="fsIcon"><use href="#i-fs"/></svg>
      </button>
    </div>
  </div>

</div>

<footer>
  <span class="footer-copy">© 2024 Het Sonkusare — Video Editor</span>
  <a href="index.html" class="footer-back">
    <svg width="12" height="12"><use href="#i-back"/></svg>
    Back to Portfolio
  </a>
</footer>

<script>
// ============================================================
//  MEDIA FILES LIST
// ============================================================
const mediaFiles = [
  { file: "photo1.jpeg",  title: "Its Look Like Admin" },
  { file: "video1.mp4",  title: "Video 1" },
  { file: "video2.mp4",  title: "Video 2" },
  { file: "video3.mp4",  title: "Video 3" },
  { file: "video4.mp4",  title: "Video 4" },
  { file: "video5.mov",  title: "Video 5" },
  { file: "video6.mov",  title: "Video 6" },
  { file: "video7.mov",  title: "Video 7" },
  { file: "video8.mp4",  title: "Video 8" },
  { file: "video9.mov",  title: "Video 9" },
  { file: "video10.mov", title: "Video 10" },
  { file: "video11.mov", title: "Video 11" },
  { file: "video12.mov", title: "Video 12" },
  { file: "video13.mov", title: "Video 13" },
  { file: "video14.mov", title: "Video 14" },
];
// ============================================================

const IMG_EXT = ['jpg','jpeg','png','gif','webp','avif','bmp','svg'];
const VID_EXT = ['mp4','webm','mov','avi','mkv','m4v','ogv'];
function getType(f) {
  const e = f.split('.').pop().toLowerCase();
  return IMG_EXT.includes(e) ? 'image' : VID_EXT.includes(e) ? 'video' : null;
}

let allItems      = mediaFiles.map(m => ({ ...m, type: getType(m.file) })).filter(m => m.type);
let filteredItems = [...allItems];
let currentIndex  = 0;
let currentVideo  = null;
let isLooping     = false;
let isAutoplay    = true;
let imgZoom       = 1;
const speeds      = [0.5, 0.75, 1, 1.25, 1.5, 2];
let speedIdx      = 2;

function buildGrid(filter = 'all') {
  const grid  = document.getElementById('galleryGrid');
  const empty = document.getElementById('emptyState');
  const setup = document.getElementById('setupGuide');
  grid.innerHTML = '';
  filteredItems = filter === 'all' ? allItems : allItems.filter(i => i.type === filter);

  if (allItems.length === 0) {
    empty.style.display = 'block'; setup.style.display = 'block';
    document.getElementById('pageCount').textContent = 'No media yet — see setup guide below.';
    return;
  }
  empty.style.display = 'none'; setup.style.display = 'none';
  const imgs = allItems.filter(i => i.type === 'image').length;
  const vids = allItems.filter(i => i.type === 'video').length;
  document.getElementById('pageCount').textContent =
    `${filteredItems.length} clips · ${imgs} photo${imgs!==1?'s':''} · ${vids} video${vids!==1?'s':''}`;

  filteredItems.forEach((item, idx) => {
    const el = document.createElement('div');
    el.className = 'gallery-item';
    el.style.animationDelay = (idx * 0.04) + 's';
    el.onclick = () => openPlayer(idx);

    const mediaEl = item.type === 'image'
      ? `<img src="media/${item.file}" alt="${item.title}" loading="lazy">`
      : `<video src="media/${item.file}" muted loop preload="metadata"
           onmouseenter="this.play()" onmouseleave="this.pause();this.currentTime=0;"></video>
         <div class="video-badge">
           <svg width="9" height="9" style="fill:var(--white)"><use href="#i-vid"/></svg>
           Video
         </div>`;

    el.innerHTML = `${mediaEl}
      <div class="gallery-overlay">
        <div class="overlay-title">${item.title}</div>
        <div class="overlay-type">${item.type}</div>
      </div>
      <div class="overlay-play">
        <svg width="16" height="16" style="fill:var(--white);margin-left:3px"><use href="#i-play"/></svg>
      </div>`;
    grid.appendChild(el);
  });
  buildSidebar();
}

function filterGallery(type, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active'); buildGrid(type);
}

function buildSidebar(query = '') {
  const list = document.getElementById('sidebarList');
  list.innerHTML = '';
  document.getElementById('sidebarCount').textContent = filteredItems.length;
  filteredItems.forEach((item, idx) => {
    if (query && !item.title.toLowerCase().includes(query.toLowerCase())) return;
    const div = document.createElement('div');
    div.className = 'playlist-item' + (idx === currentIndex ? ' active' : '');
    div.id = `pi-${idx}`; div.onclick = () => openPlayer(idx);
    const thumb = item.type === 'image'
      ? `<img src="media/${item.file}" loading="lazy" alt="">`
      : `<video src="media/${item.file}" preload="metadata" muted></video>
         <div class="pi-play-icon"><svg width="10" height="10" style="fill:var(--red)"><use href="#i-play"/></svg></div>`;
    div.innerHTML = `
      <div class="pi-thumb">${thumb}</div>
      <div class="pi-info">
        <div class="pi-title">${item.title}</div>
        <div class="pi-meta">${item.type}</div>
      </div>
      <div class="pi-num">${idx + 1}</div>
      <div class="pi-bars"><span></span><span></span><span></span></div>`;
    list.appendChild(div);
  });
}

function filterSidebar(q) { buildSidebar(q); }

function highlightSidebar(idx) {
  document.querySelectorAll('.playlist-item').forEach((el,i) => el.classList.toggle('active', i===idx));
  const el = document.getElementById(`pi-${idx}`);
  if (el) el.scrollIntoView({ behavior:'smooth', block:'nearest' });
}

function openPlayer(idx) {
  currentIndex = idx;
  document.getElementById('playerOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
  loadMedia(idx); buildSidebar(); highlightSidebar(idx); showKbHint();
}

function closePlayer() {
  document.getElementById('playerOverlay').classList.remove('open');
  document.body.style.overflow = '';
  if (currentVideo) { currentVideo.pause(); currentVideo = null; }
}

function loadMedia(idx) {
  if (idx < 0 || idx >= filteredItems.length) return;
  currentIndex = idx;
  const item = filteredItems[idx];
  if (currentVideo) { currentVideo.pause(); currentVideo = null; }

  const wrap    = document.getElementById('mediaWrap');
  const ctrl    = document.getElementById('videoControls');
  const imgCtrl = document.getElementById('imgControls');
  const stageBg = document.getElementById('stageBg');
  wrap.innerHTML = '';

  document.getElementById('playerTitle').textContent  = item.title;
  document.getElementById('playerCount').textContent  = `${idx+1} / ${filteredItems.length}`;

  if (item.type === 'image') {
    ctrl.classList.remove('visible'); imgCtrl.style.display = 'flex'; imgZoom = 1;
    const img = document.createElement('img');
    img.src = 'media/' + item.file; img.id = 'activeImg';
    img.onload = () => { stageBg.style.backgroundImage = `url(media/${item.file})`; };
    wrap.appendChild(img);
  } else {
    ctrl.classList.add('visible'); imgCtrl.style.display = 'none';
    const vid = document.createElement('video');
    vid.src = 'media/' + item.file; vid.preload = 'auto';
    vid.volume = parseFloat(document.getElementById('volSlider').value);
    vid.playbackRate = speeds[speedIdx]; vid.loop = isLooping;

    vid.addEventListener('loadedmetadata', () => {
      document.getElementById('timeTot').textContent = fmtTime(vid.duration);
      const isVert = vid.videoHeight > vid.videoWidth;
      vid.className = isVert ? 'vid-vertical' : 'vid-horizontal';
      if (isVert) {
        const canvas = document.createElement('canvas');
        canvas.width = 8; canvas.height = 14;
        const ctx = canvas.getContext('2d');
        const paint = () => {
          try { ctx.drawImage(vid, 0, 0, 8, 14); stageBg.style.backgroundImage = `url(${canvas.toDataURL()})`; } catch(e) {}
        };
        vid.addEventListener('playing', paint, {once:true});
        vid.addEventListener('timeupdate', paint, {once:true});
        paint();
      } else { stageBg.style.backgroundImage = ''; }
    });

    vid.addEventListener('timeupdate',   updateSeek);
    vid.addEventListener('progress',     updateBuffer);
    vid.addEventListener('play',  () => setPlayIcon(false));
    vid.addEventListener('pause', () => setPlayIcon(true));
    vid.addEventListener('ended', () => { if (!isLooping && isAutoplay && idx < filteredItems.length-1) navigate(1); });
    vid.addEventListener('volumechange', updateVolIcon);

    wrap.appendChild(vid); currentVideo = vid;
    vid.play().catch(()=>{}); setPlayIcon(false);
  }
  highlightSidebar(idx);
}

function navigate(dir) {
  const n = currentIndex + dir;
  if (n >= 0 && n < filteredItems.length) loadMedia(n);
}

function togglePlay() {
  if (!currentVideo) return;
  if (currentVideo.paused) { currentVideo.play(); triggerFlash(false); }
  else { currentVideo.pause(); triggerFlash(true); }
}

function setPlayIcon(paused) {
  document.querySelector('#playIcon use').setAttribute('href', paused ? '#i-play' : '#i-pause');
}

function triggerFlash(paused) {
  const el = document.getElementById('playFlash');
  document.getElementById('flashIcon').querySelector('use').setAttribute('href', paused ? '#i-pause' : '#i-play');
  el.classList.remove('pop','fade'); void el.offsetWidth; el.classList.add('pop');
  setTimeout(() => el.classList.replace('pop','fade'), 380);
}

function toggleMute() {
  if (!currentVideo) return;
  currentVideo.muted = !currentVideo.muted; updateVolIcon();
}
function setVolume(val) {
  if (!currentVideo) return;
  currentVideo.volume = parseFloat(val); currentVideo.muted = false; updateVolIcon();
}
function updateVolIcon() {
  if (!currentVideo) return;
  const use = document.querySelector('#volIcon use');
  if (currentVideo.muted || currentVideo.volume === 0) use.setAttribute('href','#i-mute');
  else if (currentVideo.volume < 0.5) use.setAttribute('href','#i-vol-low');
  else use.setAttribute('href','#i-vol');
  document.getElementById('volSlider').value = currentVideo.muted ? 0 : currentVideo.volume;
}
function toggleLoop() {
  isLooping = !isLooping; if (currentVideo) currentVideo.loop = isLooping;
  document.getElementById('loopBtn').classList.toggle('active', isLooping);
}
function toggleAuto() {
  isAutoplay = !isAutoplay;
  document.getElementById('autoBtn').classList.toggle('active', isAutoplay);
}
function cycleSpeed() {
  speedIdx = (speedIdx+1) % speeds.length;
  if (currentVideo) currentVideo.playbackRate = speeds[speedIdx];
  document.getElementById('speedBtn').textContent = speeds[speedIdx] + 'x';
}
function toggleFullscreen() {
  const stage = document.getElementById('playerStage');
  if (!document.fullscreenElement) {
    (stage.requestFullscreen||stage.webkitRequestFullscreen)?.call(stage);
    document.querySelector('#fsIcon use').setAttribute('href','#i-fs-exit');
  } else {
    (document.exitFullscreen||document.webkitExitFullscreen)?.call(document);
    document.querySelector('#fsIcon use').setAttribute('href','#i-fs');
  }
}
document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) document.querySelector('#fsIcon use')?.setAttribute('href','#i-fs');
});

const seekWrap = document.getElementById('seekbarWrap');
let isSeeking = false;
seekWrap.addEventListener('mousedown', e => { isSeeking=true; doSeek(e); });
document.addEventListener('mouseup', () => { isSeeking=false; });
document.addEventListener('mousemove', e => { if (isSeeking) doSeek(e); });
// Touch seek support
seekWrap.addEventListener('touchstart', e => { isSeeking=true; doSeekTouch(e); }, {passive:true});
document.addEventListener('touchend', () => { isSeeking=false; });
document.addEventListener('touchmove', e => { if (isSeeking) doSeekTouch(e); }, {passive:true});
seekWrap.addEventListener('mousemove', e => {
  const rect = document.getElementById('seekbarTrack').getBoundingClientRect();
  const pct = Math.min(Math.max((e.clientX-rect.left)/rect.width,0),1);
  const tip = document.getElementById('seekTooltip');
  tip.style.left = (pct*100)+'%';
  if (currentVideo?.duration) tip.textContent = fmtTime(pct*currentVideo.duration);
});

function doSeek(e) {
  if (!currentVideo?.duration) return;
  const rect = document.getElementById('seekbarTrack').getBoundingClientRect();
  currentVideo.currentTime = Math.min(Math.max((e.clientX-rect.left)/rect.width,0),1)*currentVideo.duration;
}
function doSeekTouch(e) {
  if (!currentVideo?.duration || !e.touches[0]) return;
  const rect = document.getElementById('seekbarTrack').getBoundingClientRect();
  currentVideo.currentTime = Math.min(Math.max((e.touches[0].clientX-rect.left)/rect.width,0),1)*currentVideo.duration;
}
function updateSeek() {
  if (!currentVideo?.duration) return;
  const pct = (currentVideo.currentTime/currentVideo.duration)*100;
  document.getElementById('seekFill').style.width = pct+'%';
  document.getElementById('timeNow').textContent = fmtTime(currentVideo.currentTime);
}
function updateBuffer() {
  if (!currentVideo?.duration||!currentVideo.buffered.length) return;
  const pct = (currentVideo.buffered.end(currentVideo.buffered.length-1)/currentVideo.duration)*100;
  document.getElementById('seekBuffer').style.width = pct+'%';
}

function zoomImg(d) {
  imgZoom = Math.min(Math.max(imgZoom+d,0.5),4);
  const img = document.getElementById('activeImg');
  if (img) img.style.transform = `scale(${imgZoom})`;
}
function resetZoom() {
  imgZoom=1; const img=document.getElementById('activeImg');
  if (img) img.style.transform='scale(1)';
}
function fmtTime(s) {
  if(!s||isNaN(s)) return '0:00';
  return Math.floor(s/60)+':'+String(Math.floor(s%60)).padStart(2,'0');
}

let kbTimer;
function showKbHint() {
  const h = document.getElementById('kbHint');
  h.classList.add('show'); clearTimeout(kbTimer);
  kbTimer = setTimeout(() => h.classList.remove('show'), 3500);
}

document.addEventListener('keydown', e => {
  if (!document.getElementById('playerOverlay').classList.contains('open')) return;
  if (e.target.tagName === 'INPUT') return;
  const isVid = filteredItems[currentIndex]?.type === 'video';
  switch(e.key) {
    case ' ': case 'k': e.preventDefault(); if (isVid) togglePlay(); break;
    case 'ArrowLeft':  e.preventDefault(); if (isVid&&!e.shiftKey) currentVideo.currentTime-=5; else navigate(-1); break;
    case 'ArrowRight': e.preventDefault(); if (isVid&&!e.shiftKey) currentVideo.currentTime+=5; else navigate(1); break;
    case 'j': if(currentVideo) currentVideo.currentTime-=10; break;
    case 'l': if(currentVideo) currentVideo.currentTime+=10; break;
    case 'ArrowUp': e.preventDefault(); if(currentVideo){currentVideo.volume=Math.min(1,currentVideo.volume+0.1);document.getElementById('volSlider').value=currentVideo.volume;updateVolIcon();} break;
    case 'ArrowDown': e.preventDefault(); if(currentVideo){currentVideo.volume=Math.max(0,currentVideo.volume-0.1);document.getElementById('volSlider').value=currentVideo.volume;updateVolIcon();} break;
    case 'm': case 'M': toggleMute(); break;
    case 'f': case 'F': toggleFullscreen(); break;
    case '>': cycleSpeed(); break;
    case 'Escape': closePlayer(); break;
    case '0':case '1':case '2':case '3':case '4':
    case '5':case '6':case '7':case '8':case '9':
      if(currentVideo?.duration) currentVideo.currentTime=(parseInt(e.key)/10)*currentVideo.duration; break;
  }
});

document.getElementById('playerStage').addEventListener('click', e => {
  if (e.target.closest('button')||e.target.closest('.img-controls')) return;
  filteredItems[currentIndex]?.type==='video' ? togglePlay() : navigate(1);
});

const cursor = document.getElementById('cursor');
const ring   = document.getElementById('cursorRing');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove', e => { mx=e.clientX; my=e.clientY; });
(function tick() {
  cursor.style.left=mx+'px'; cursor.style.top=my+'px';
  rx+=(mx-rx)*0.12; ry+=(my-ry)*0.12;
  ring.style.left=rx+'px'; ring.style.top=ry+'px';
  requestAnimationFrame(tick);
})();

buildGrid();
</script>
</body>
</html>